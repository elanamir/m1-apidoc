
# Idempotent Requests
```shell
curl https://api.stripe.com/v1/charges \
  -u sk_test_4eC39HqLyjWDarjtT1zdp7dc: \
  -H "Idempotency-Key: XV1DiuApTmAbLw1Y" \
  -d amount=2000 \
  -d currency=usd \
  -d description="Charge for jenny.rosen@example.com" \
  -d source=tok_visa
```
The API supports idempotency for safely retrying requests without accidentally performing the same operation twice. This is useful when an API call is disrupted in transit and you do not receive a response. For example, if a request to create a charge fails due to a network connection error, you can retry the request with the same idempotency key to guarantee that only a single charge is created.

An idempotency key is a unique value generated by the client which the server uses to recognize subsequent retries of the same request. How you create unique keys is up to you, but we suggest using V4 UUIDs, or another random string with enough entropy to avoid collisions. Keys expire after 24 hours, so a new request is generated if a key is reused outside of that time frame.

To perform an idempotent request, provide an additional Idempotency-Key: <key> header to the request.

Stripe's idempotency works by saving the resulting status code and body of the first request made for any given idempotency key, regardless of whether it succeeded or failed. Subsequent requests with the same key return the same result. The idempotency layer compares incoming parameters to those of the original request and error unless they're the same to prevent accidental misuse. The exception to these rules is that results are only saved if an API endpoint started executing. If incoming parameters failed validation, or the request conflicted with another that was executing concurrently, no idempotent result is saved because no API endpoint began execution.

GET and DELETE requests are idempotent by definition, meaning that the same backend work occurs no matter how many times the same request is issued. You shouldn't send an idempotency key with these verbs because it has no effect.

Was this section helpful?YesNo